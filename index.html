<!DOCTYPE html>
<html >
<head>
  <meta charset="utf-8">
  
  <title>JumorZhu&#39;s Labs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Keep Clame And Carry On !">
<meta property="og:type" content="website">
<meta property="og:title" content="JumorZhu's Labs">
<meta property="og:url" content="http://CodingJoker.github.io/index.html">
<meta property="og:site_name" content="JumorZhu's Labs">
<meta property="og:description" content="Keep Clame And Carry On !">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JumorZhu's Labs">
<meta name="twitter:description" content="Keep Clame And Carry On !">
  
    <link rel="alternative" href="/atom.xml" title="JumorZhu&#39;s Labs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
      <link href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" rel="stylesheet">
  
  
  
      <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
      <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/style.css">
  
      <style> .article { opacity: 0;} </style>
  
  <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">
  
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/clipboard.js/1.5.9/clipboard.min.js"></script>
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false,
          fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
          scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.0.9/scrollreveal.min.js"
      }
  </script>

  
      <script>
          yiliaConfig.rootUrl = "/";
      </script>
  

  
  
</head>
<body>
  <!--[if lt IE 9]>
<style> body { background: orange !important;} div#container { display: none;} </style>
<p id="ie-updater">
    
        IE6/7/8 aren't Supported<br>Please UPDATE your Browser!<br>
    
    <a href="//www.bing.com/search?q=Chrome" target="_blank">Chrome</a>, <a href="//www.bing.com/search?q=Firefox" target="_blank">Firefox</a><br>
    Hexo Theme <a href="//github.com/MOxFIVE/hexo-theme-yelee" target="_blank">Yelee</a> by MOxFIVE
</p>
<![endif]-->
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="http://www.sliwu6.com/images/201605/goods_img/4422_P_1462608127653.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">JumorZhu</a></h1>
        </hgroup>

        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/CodingJoker" title="GitHub"></a>
                            
                                <a class="fa Email" target="_blank" href="mailto:550928460@qq.com" title="Email"></a>
                            
                                <a class="fa Facebook" target="_blank" href="https://www.facebook.com/profile.php?id=100010736526688" title="Facebook"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/2756368342/profile?topnav=1&wvr=6&is_all=1" title="新浪微博"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端小记/">前端小记</a></li></ul>
                    </div>
                </section>
                
                
                

                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">JumorZhu</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="http://www.sliwu6.com/images/201605/goods_img/4422_P_1462608127653.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">JumorZhu</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/CodingJoker" title="GitHub"></a>
                            
                                <a class="fa Email" target="_blank" href="mailto:550928460@qq.com" title="Email"></a>
                            
                                <a class="fa Facebook" target="_blank" href="https://www.facebook.com/profile.php?id=100010736526688" title="Facebook"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/2756368342/profile?topnav=1&wvr=6&is_all=1" title="新浪微博"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-阿里巴巴2016春季招聘面试体会" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/19/阿里巴巴2016春季招聘面试体会/" class="article-date">
      <time datetime="2016-05-19T01:40:54.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/阿里巴巴2016春季招聘面试体会/">阿里巴巴2016春季招聘面试体会</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p><Excerpt in index | 首页摘要></p>
<ul>
<li>面试地点：北京国家广告产业中心</li>
<li>面试时间：2016.5.18 - 10:30
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/随心而动/">随心而动</a>
    </div>


      
      
        <p class="article-more-link">
          <a href="/2016/05/19/阿里巴巴2016春季招聘面试体会/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-腾讯OMG前端面试体会" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/15/腾讯OMG前端面试体会/" class="article-date">
      <time datetime="2016-05-15T02:13:54.000Z" itemprop="datePublished">2016-05-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/15/腾讯OMG前端面试体会/">腾讯OMG前端面试体会</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">前些日子有小伙伴在群里发了一个小广告，说北京的腾讯需要招实习生，简历请发xxx邮箱，当时想也没想，就投了，没想到第二天就打电话来让我约个时间面试。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">到了面试那天，因为现在实习的公司搜狐和腾讯的希尔码大厦很近，就直接走过去了。不过到他们楼下觉得逼格有点low，这不应该是腾讯应该有的啊。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">进去坐下来面试的时候，面试官按照我的简历上的内容一一问我，首先是部门情况，实习了多久，然后是简历上很细的一些点，但是他们都没有因为我是才大三就实习了半年而感到惊讶，这确实让我很纳闷儿，是因为跟我情况一样在腾讯实习的同学有很多了吗？见怪不怪？他们无意识的给了我一个下马威。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">进入面试提问环节，第一个面试官首先问了我一下angular的问题，angular作用域、控制器之间的通讯，$apply和$watch，然后是es6了解多少，在部门里面负责那些内容，gulp使用情况，没有问我具体的关于某个技术点的内容，也让我感到诧异，之前还把Js的函数过了一遍 = =！。 在回答的过程过程中有两个地方觉得不是好，一个就是angular的指令中的compile和link函数的区别，一直在用link却忘了如何使用compile了，操蛋！另外一个就是angular1.3版本以上兼容IE8报了什么错，因为自己也没怎么了解就胡诌了一番，再一个就是angular和react的技术选型你应该选哪个 ，我确实没答上来。不过第一技术面好歹过了。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">到第二面的时候进来的是他们的组长，一进来我就觉得他很装逼所以就有些受不了和抵触情绪(自己的问题很大啊23333), 在他的对我整个面试的过程中都是一副很不屑的样子也着实让我不爽。不过问的问题还是挺有深度的，他问了一下一个问题：</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">            1.mvp和mvvm的区别</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">            2.http协议缓存的过程</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">            3.promise模型的实现</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">            4.一个逻辑问题</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">            5.两个算法题</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">以上五个问题我在回答了之后发现只有promise这个回答的比较完整，其他的都是半吊子情况，特别有个很打脸的地方就是，在简历上我写了熟悉http协议，但是特么扯一半天没扯明白什么回事儿（哔了狗）。在一个就是mvp和mvvm的区别，上次我觉得阿里面试也GG在这里。没想到在一个地方跌倒两次，我这么懒也是没谁了。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">总的来说这次的面试过程是失败的，因为自己在面试的过程中还不够自信，还有看问题的角度也太low了，B格不够，这点确实需要培养的。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">两个面试官都问到同一个问题，就是你比别人优秀在哪儿？你认为同样的时间内，你比别人增长快的原因是什么？ 其实这确实是一个坑，下次面试的时候需要好好考虑一下。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;"> </span></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/前端小记/">前端小记</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-关于邮箱前端架构的一些思考（续一）-功能模块" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/24/关于邮箱前端架构的一些思考（续一）-功能模块/" class="article-date">
      <time datetime="2016-04-24T02:04:51.000Z" itemprop="datePublished">2016-04-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/24/关于邮箱前端架构的一些思考（续一）-功能模块/">关于邮箱前端架构的一些思考（续一）--功能模块</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">今天主要给大家讲讲邮箱的功能模块这一部分，它跟架构有着同样的权重，因为如果一个产品就算架构再好，功能点薄弱，这个产品也不会有太多的生命力。给大家建议一点的就是，在功能模块这一部分，一定要结合自己开发所用到的技术，思想，融合起来，这样才能更好的去设计一个产品的技术架构。好了，多的不扯了，入正题吧。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">1.功能模块的封装</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">在这一块，是考验一个FEer的基本功的地方 ，一个功能模块在实现了产品的业务逻辑与众多功能点的同时，又保证了其模块的内部结构组织的清晰，明了，这需要FEer在coding过程中不断的去总结和思考的。我在coding的过程中，有两三次曾推倒了之前的设计，因为在直接的结构上，这个功能模块的耦合性太高了，导致后续涉及到此功能模块的其他模块的封装成本太高，或者是执行效率太低。不过切记，千万不要怕重构你的模块，因为大多数功能你已经实现了，就是在模块的组织上面需要花费一点功夫，这才是你能力提升的一种很好的实践方式。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">在模块封装之前，你需要去自习阅读产品设计文档，可能某个不起眼的小功能会让你在封装完之后发现，自己的数据结构扩展起来代价太大，需要重新设计，这就尴尬了，无形中给自己挖了很多坑，不断的去填一些完全可以避免的坑并不是一个FEer能力的真正展现，反而暴露了很多的问题。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">在模块封装的过程中，你需要遵循小组内经过讨论约定的规范，比如说代码编写规范，设计规范，暴露出来的API规范，等等，都需要你去一一的落实下来的，只有很仔细的了解了这些规范之后，才能更好与他人合作，也少了许多后期维护的坑。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">在模块封装完之后，还需要考虑的就是模块的输入输出，直白的讲就是你需要测试下你的模块在多种情况下输入对应的输出是否正常，在一些数据类型，数据结构上面一定要多加小心，举个栗子，一个功能模块的输入是一个配置，那么这个输入的参数就需要是一个option对象，而不是像function(param1,param2,param3)这样。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">2.功能模块的复用</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">这里还是先举一个栗子，邮箱中的收件箱，草稿箱，回收站，垃圾邮件箱等，有没有觉得都差不多一个样子，只不过在一些细节的地方有略微的差别罢了，所以在邮件列表和邮件详情功能模块就要注意了，如何去复用这些功能模块，这是你需要结合你的实际情况去考虑的，不是所有的人都是做邮箱前端的，将思想融入到实践中，以不变应万变。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">3.功能模块的扩展和可维护性</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">模块的可扩展和可维护性也是一个功能模块重要的组成部分。如何实现这两个特性，对于你的数据结构和函数的封装有很大的关系，在代码中多使用HOOK，原型，作用域链，对象，可以简化你的coding过程，同时增强了功能模块的扩展和可维护性。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">^ _ ^</span></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/前端小记/">前端小记</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-关于邮箱前端架构的一些思考" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/17/关于邮箱前端架构的一些思考/" class="article-date">
      <time datetime="2016-04-17T05:55:16.000Z" itemprop="datePublished">2016-04-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/关于邮箱前端架构的一些思考/">关于邮箱前端架构的一些思考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">因为自己到现在都在搜狐实习，并且部门总监也是一个技术强烈热爱者，所以就有幸参与到前端邮箱的开发中来。 在接受这个任务的时候，由于自己对前端框架angular比较熟悉，所以我的前端领导就让我去架构邮箱去了。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">突然来了一个这么棘手的活儿，自己真的是压力山大，因为此次邮箱采用的是前后分离的开发方式，考虑的东西实在是太多太杂了，像什么拦截器啊，前端数据缓存，路由，模块之间的交互，公共组件，项目管理，版本控制等等都需要涉及到，这就给我出了一个难题，如何实现，组织，完善各个模块是我在邮箱开发过程中不断思考的问题。下面我来分享一些我在邮箱前端架构中的一些体会和心得。</span></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: large;">1.项目目录结构清晰明了，基于项目所使用的框架的功能来组件项目目录。</span></strong></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">项目目录结构：</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">app</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">components</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">angular-1.5.x</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">jquery</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">tpls</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">img</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">css</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">js</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">common</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">controller</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">directive</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">fliter</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">model</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">service</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">app.js</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">scss</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">fonts</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">data</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">index.html</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">build</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">结合angular框架，我所创建的项目目录如上所示</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">components是第三方库的根目录，所有使用的第三方库都放在里面，而团队自己开发的库放在js/common中。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">tpls是一些模板文件，用过angular的同学应该都知道，它是用为路由提供模板文件的。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">scss是用来简化css的编写过程的，我们使用gulp来将它下面的.scss文件编译成css目录下的.css文件</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">data用于存放前端模拟后端数据时创建的json文件。因为我们采用的是前后分离的方式，就不可避免的需要先写些假数据进行调试。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">js 用于存放与项目有关的js文件，旗下除了common都是angular中的组件</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">build 用于存放项目发布时从app下打包出来的项目</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">这样邮箱目录的大致框架就出来了，这里有一点建议就是当你在搭建项目目录的时候，你需要考虑到你所使用到的技术，项目如何去打包发布，团队如何协同。一个清晰的目录结构在后期的维护中可以减少很多工作量。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> </span></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: large;">2.项目按功能模块进行开发与版本控制工具git</span></strong></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">考虑到邮箱是单页应用，并且采用的前端框架是angular，所以项目的开发是按照功能板块进行开发的，其实我个人觉得应用都应该按功能板块进行开发，因为不能按照功能板块进行开发的项目，可能当前的架构还不是最优的，还有提升的空间。项目的开发当然不止我一个人，所以需要协同开发，这就涉及到了一个问题，关于代码库中的版本如何控制。在这里我们使用的是git版本控制工具，按功能板块创建branch，合并代码的使用使用merge。虽然使用merge后项目的时间线上的提交很乱，但是我们还是没有使用rebase，因为rebase到master上的时候可能会不止一次的解决冲突，非常不利于团队的合作，如果是一个人开发的话可以使用rebase。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> </span></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: large;">3.各功能模块的交互与邮箱系统的鉴权</span></strong></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">按照各个功能模块开发是非常有好处的，因为你只负责自己的的功能板块与暴露给其他功能模块调用服务API，不用去负责其他板块内对自己板块的调用的逻辑。在邮箱开发过程中，我们使用service来实现功能模块暴露给其他功能模块调用的api，极大的简化了在开发过程中业务逻辑的错综复杂带来的巨大代码逻辑。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">由于项目时采用前后分离的方式，就免不了需要使用异步请求，所以在异步请求之上，我封装了一层鉴权，在邮箱登录之后将token保存在鉴权类的私有变量中，在请求的过程中将token放在header，用于接口请求的鉴权。具体的过程可以看<a href="http://blog.csdn.net/cczhumin/article/details/51111990" target="_blank" rel="external">这里</a>  <a href="http://jumorzhumin.sinaapp.com/2016/04/10/angularjs%E4%B8%AD%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8/" target="_blank" rel="external">或这里</a>。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">以上是我对邮箱架构的思考，在功能板块这里还有许多东西要讲，未完待续哦~</span></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/angularJs/">angularJs</a><a class="article-category-link" href="/categories/angularJs/前端小记/">前端小记</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-angularJS中的拦截器" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/10/angularJS中的拦截器/" class="article-date">
      <time datetime="2016-04-10T03:42:34.000Z" itemprop="datePublished">2016-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/10/angularJS中的拦截器/">angularJS中的拦截器</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">这里我将的拦截器，是关于前端项目的请求的拦截器，基于angularJS中的httpProvider的。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">有没有这样一种场景，在使用ajax请求的时候，服务端需要验证header中的token和cookie，所以每次请求的时候都需要加上这个token，cookie不用加，每次请求的时候浏览器都会帮你带上，所以你就需要在有ajax的地方都添加一段向header中写token的代码，是不是觉得挺闹心的？</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">别怕，我来帮你解决这个问题。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">在angularJS官方api中$http处有这么一段话：</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">For purposes of global error handling, authentication, or any kind of synchronous or asynchronous pre-processing of request or postprocessing of responses, it is desirable to be able to intercept requests before they are handed to the server and responses before they are handed over to the application code that initiated these requests. The interceptors leverage the <a href="http://docs.angularjs.cn/api/ng/service/$q" target="_blank" rel="external">promise APIs</a> to fulfill this need for both synchronous and asynchronous pre-processing.</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">The interceptors are service factories that are registered with the <code>$httpProvider</code> by adding them to the <code>$httpProvider.interceptors</code>array. The factory is called and injected with dependencies (if specified) and returns the interceptor.</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">这段话的意思就是通过使用promise对象（处理回调的一个非常使用的对象）和$httpProvider.interceoters这个数组，按照该数组的指定格式，就可以对请求的过程进行控制，数据的格式是这样的：</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">{</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> // optional method</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> ‘request’: function(config) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> // do something on success</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return config;</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> },</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">// optional method</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> ‘requestError’: function(rejection) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> // do something on error</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> if (canRecover(rejection)) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return responseOrNewPromise</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return $q.reject(rejection);</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> },</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> </span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">// optional method</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> ‘response’: function(response) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> // do something on success</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return response;</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> },</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">// optional method</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> ‘responseError’: function(rejection) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> // do something on error</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> if (canRecover(rejection)) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return responseOrNewPromise</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return $q.reject(rejection);</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">}</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">相信一些小伙伴看了这个数据已经有些感觉了，因为angular 的$http是封装了ajax的，所以可以通过$httpProvider控制请求的过程。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">附上我在程序中的代码加深理解：</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">         var App = angular.module(‘app’,[]);</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">App.factory(‘authInterceptor’,[‘$q’,’authService’,’mAlert’,function($q,authService,mAlert){</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> ‘request’:function(config){</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> var token = (authService.getToken());</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> config.headers[‘author’] = token;</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return config ||$q.when(config);</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> },</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> ‘responseError’ :function(resError) {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> if(resError.status == 404){</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> mAlert.alert({</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> title:’系统提示’,</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> body:’请求资源未找到’</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> })</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return $q.reject(resError);</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">}])</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">.provider(‘authService’,function(){</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> var token=”zhumin”,</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> self = this;</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> self.$get = function(){</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return {</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> getToken:function(){</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> return token;</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> }</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: large;">}).config([‘$httpProvider’,function($httpProvider){</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">$httpProvider.interceptors.push(‘authInterceptor’)</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">}])</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;"> mAlert是我自己封装的一个模态框，可以忽略。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">factory返回了一个$httpProvider.interceptors数据规定的格式，用于当request之前为header添加token，reponseError用与服务端返回错误状态时的操作。provider相当于封装了一个类，用于factory中调用。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">在config中将拦截器注入数据中，就可以实现在整个引用程序中的ajax请求的header中带上token，效果不错吧~</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: large;">效果图如下：</span></p>
<p><a href="http://jumorzhumin-wordpress.stor.sinaapp.com/uploads/2016/04/httpProvider.png" target="_blank" rel="external"><img src="http://jumorzhumin-wordpress.stor.sinaapp.com/uploads/2016/04/httpProvider.png" alt="" title="httpProvider"></a></p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/angularJs/">angularJs</a><a class="article-category-link" href="/categories/angularJs/前端小记/">前端小记</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-转战gulp，实现前端静态资源的压缩，加MD5戳，替换引用，加CDN前缀" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/27/转战gulp，实现前端静态资源的压缩，加MD5戳，替换引用，加CDN前缀/" class="article-date">
      <time datetime="2016-03-27T03:08:40.000Z" itemprop="datePublished">2016-03-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/27/转战gulp，实现前端静态资源的压缩，加MD5戳，替换引用，加CDN前缀/">转战gulp，实现前端静态资源的压缩，加MD5戳，替换引用，加CDN前缀</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">之前一直在使用grunt，总感觉grunt的参数配置方法很繁琐，没有一个比较清晰的流程，加上自己对gulp的流操作比较感兴趣，就决定转战gulp了。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">相信前端er在发布自己的代码时如果不使用前端一些构建工具的话，对频繁上线的项目来说，自己手动压缩打包替换CDN前缀那是一件多么恐怖的事情！所以采用gulp前端构建工具是一个非常明智的选择。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">首先来说说发布项目时前端需要进行哪些操作：</span></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">1.对静态资源的压缩合并</span></strong></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">2.对js,css，img等资源加MD5戳</span></strong></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">3.对引用了以上加MD5戳的HTML文件进行替换文件内的引用。</span></strong></p>
<p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">4.为HTML文件内的引用加CDN前缀</span></strong></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">虽然看起来就这4步，不过写起任务来还是挺麻烦的。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">上代码：</span></p>
<ol>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var gulp = require(‘gulp’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var minimist = require(‘minimist’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var uglify = require(‘gulp-uglify’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var minifyHtml = require(‘gulp-minify-html’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var minifyCss = require(‘gulp-minify-css’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var rev = require(‘gulp-rev’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var revReplace = require(‘gulp-rev-replace’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var prefix = require(‘gulp-prefix’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var zip = require(‘gulp-zip’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var gulpSequence = require(‘gulp-sequence’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var cmd = {</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">string: ‘v’,</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">default: { v: ‘1.0’ }</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">};</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var option = {</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">src:’poster’,</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">dest:’poster/build’,</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">cdn:’<a href="http://sns_wf.cdn.sohusce.com&#39;///poster/" target="_blank" rel="external">http://sns_wf.cdn.sohusce.com&#39;///poster/</a></span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">}</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var options = minimist(process.argv.slice(2), cmd);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var version = options.v;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">//统一加MD5之后替换引用</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘cdn’,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var revAll = new RevAll({dontRenameFile:[/^\/.<em>.html/]});// ,/^\/.</em>.jpg|png/</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.src([option.src+’/templates-dev/<em>.html’,option.src+’/static/*</em>‘])</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(revAll.revision())</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.dest+’/‘+version))</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(revAll.versionFile())</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.dest+’/‘+version))</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(revAll.manifestFile())</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.dest+’/‘+version)); </span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">});</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(“rep” ,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var manifest = gulp.src(option.dest + ‘/‘+ version + “/rev-manifest.json”);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">console.log(option.dest +’/‘+ version);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">return gulp.src(option.dest +’/‘+ version + ‘/templates-dev/*.html’)</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(revReplace({manifest: manifest}))</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.src +’/templates’ ));</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">});</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘prefix’,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">console.log(‘加CDN前缀…’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">return gulp.src(option.src+’/templates/*.html’)</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(prefix(option.cdn, null))</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.src+’/templates/‘));</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘htmlmin’,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">return gulp.src([option.src + ‘/templates/*.html’],{base:option.src })</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(minifyHtml())</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.src));</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘jsmin’,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">return gulp.src([option.dest +’/‘+ version + ‘/static/js/<em>.js’,option.dest +’/‘+ version + ‘/static/imgcut/js/</em>.js’],{base:option.dest +’/‘+ version})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(uglify())</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.dest +’/‘+ version));</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘cssmin’,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">return gulp.src([option.dest +’/‘+ version + ‘/static/css/<em>.css’,option.dest +’/‘+ version + ‘/static/imgcut/css/</em>.css’],{base:option.dest +’/‘+ version})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(minifyCss())</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.dest +’/‘+ version));</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘zip’,function(){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">console.log(‘压缩中…’)</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">return gulp.src([option.dest+’/‘+version+’/static/**’,])</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(zip(‘static.zip’))</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">.pipe(gulp.dest(option.dest+’/‘+version));</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp.task(‘r’,function(cb){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulpSequence(‘rep’,’prefix’,[‘htmlmin’,’jsmin’,’cssmin’],’zip’,cb)</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">})</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: medium;"> 这里引用的插件名可以去npm官网上搜下作用和使用方法，这里不再详细叙述，主要讲下几个关键的插件：</span></li>
</ol>
<ul>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;"><a href="https://www.npmjs.com/package/gulp-rev-all" title="gulp-rev-all" target="_blank" rel="external">gulp-rev-all</a>  给静态资源加MD5戳，，生成源文件名和打了戳的MD5文件名的一个rev-manifest.json文件（这很关键）。</span></strong></li>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;"><a href="https://www.npmjs.com/package/gulp-prefix" title="gulp-prefix" target="_blank" rel="external"> gulp-prefix</a> 给引用了静态资源的的HTML文件替换引用和加CDN前缀</span></strong></li>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;"><a href="https://www.npmjs.com/package/minimist" title="minimist" target="_blank" rel="external">minimist</a> 给任务的执行添加参数 eg: gulp r –v 1.0</span></strong></li>
<li><p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;"><a href="https://www.npmjs.com/package/gulp-sequence" title="gulp-sequence" target="_blank" rel="external">gulp-sequence</a> 将任务的执行按指定的顺序执行</span></strong><br><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">说完了一些重要的插件，咱再来讲讲咱得任务。</span></p>
</li>
<li><p><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">cdn 详见插件介绍的gulp-rev-all 。</span></strong></p>
</li>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">rep 详见gulp-prefix</span></strong></li>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">htmlmin,cssmin,jsmin,zip 给静态资源压缩后打成一个zip包，方便部署CDN。</span></strong></li>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">r 组织任务的执行，防止子任务执行中的异步操作扰乱整个任务的执行。</span></strong><br><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">这里R任务有个缺点就是没讲CDN任务放在其中，因为CDN任务中包含了多个异步任务，是的在R任务中产生了同步任务的假象，导致后续的操作和产生的结果错误。所以在终端需要执行以下两步任务：</span></li>
</ul>
<ol>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp cdn –v 1.0  //生成1.0版本</span></strong></li>
<li><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">gulp r</span></strong><br><strong><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">一些配置参数写在了option对象中，同学们可以按照自己的需求来修改。其中dest是任务输出目录，打包好的zip文件在bulid/x.x 目录下。</span></strong></li>
</ol>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">介绍完毕~</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">快来跟我转战gulp吧~ </span></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/前端小记/">前端小记</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-canvas实现图片尺寸等比压缩并转换为base64字符串" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/27/canvas实现图片尺寸等比压缩并转换为base64字符串/" class="article-date">
      <time datetime="2016-03-27T01:54:01.000Z" itemprop="datePublished">2016-03-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/27/canvas实现图片尺寸等比压缩并转换为base64字符串/">canvas实现图片尺寸等比压缩并转换为base64字符串</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">最近公司的一个H5活动，搜狐新闻客户端开机图制作，需要用户上传一张图片之后，先显示出来再进行裁剪，然后上传<strong>base64字符串</strong>到服务器上。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">但是问题来了，用户一般上传的图片文件的大小都在3-5M左右，转成base64后提交给服务器的话实在是太大了，到时上传到服务器的时候服务器超时了（都是泪啊！），所以这里需要先压缩下图片。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">偶然间想起来可以用canvas进行图片压缩，因为这个H5只是在客户端的webview中的，而webview又是webkit内核，所以对canvas的支持自然是比较好的，我们就毫无疑问的选择了用canvas进行压缩。</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">先上代码吧：</span></p>
<ol>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var width = img_this.width,height = img_this.height;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var <strong>scale</strong> = width / height;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">width1 = 720;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">height1 = parseInt(width1 / scale);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var canvas = $(“#cans”);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">canvas[0].width = width1; canvas[0].height = height1;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var ctx = canvas[0].getContext(‘2d’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">ctx.<strong>drawImage</strong>(img_this,0,0,width,height,0,0,width1,height1);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">  var cropStr = canvas[0].<strong>toDataURL</strong>(<strong>“image/jpeg”,0.7</strong>)</span><br><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">这里的img_this是一个img对象，首先我们先得到这个图片的宽高比，然后指定canvas的宽度为720，高度由之前的宽高比来定。这里指定了canvas的宽度为720后，将图片画在canvas里面后转成的base64的宽度也会为720。</span></li>
</ol>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">我们用drawImage方法将图片的<strong>（0,0）坐标到(0 + width , 0+ height)坐标也就是整张图片</strong> 画到 canvas<strong>（0,0）到（width1，height1）也就是整个canvas内</strong>。然后使用toDataUrl将图片转换成jpeg的格式，后面<strong>0.7为图片的压缩质量，可以理解为压缩率</strong>。<strong>不要把图片压缩成png，因为压缩成png后base64的字符串可能比不转换前的长</strong>！</span></p>
<p><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">就这么简单的几步就实现了对图片的压缩，咋样，方便吧~</span></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/前端小记/">前端小记</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-HTML5语义化" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/07/HTML5语义化/" class="article-date">
      <time datetime="2016-03-07T01:16:25.000Z" itemprop="datePublished">2016-03-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/07/HTML5语义化/">HTML5语义化</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>HTML 5的革新之一：语义化标签一节元素标签。</p>
<p>在HTML 5出来之前，我们用<code>div</code>来表示页面章节，但是这些<code>div</code>都没有实际意义。（即使我们用css样式的id和class形容这块内容的意义）。这些标签只是我们提供给浏览器的指令，只是定义一个网页的某些部分。但现在，那些之前没“意义”的标签因为因为html5的出现消失了，这就是我们平时说的“语义”。</p>
<p>看下图没有用div标签来布局</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><figure><img src="http://www.html5jscss.com/pic/htmljscss/html5-layout.jpg" alt="HTML 5的革新——语义化标签(一)">&nbsp;</figure></p>
<p><figcaption>html5的布局</figcaption>&nbsp;</p>
<p>嗯，如上图那个页面结构没有一个div，都是采用html5语义标签（用哪些标签，关键取决于你的设计目标）。</p>
<p>但是也不要因为html5新标签的出现，而随意用之，错误的使用肯定会事与愿违。所以有些地方还是要用div的，就是因为div没有任何意义的元素，他只是一个标签，仅仅是用来构建外观和结构。因此是最适合做容器的标签。</p>
<p>W3C定义了这些语义标签，不可能完全符合我们有时的设计目标，就像制定出来的法律不可能流传100年都不改变，更何况它才制定没多久，不可能这些语义标签对所以设计目标的适应。只是一定程度上的“通用”，我们的目标是让爬虫读懂重要的东西就够了。</p>
<p>结论：不能因为有了HTML 5标签就弃用了div，每个事物都有它的独有作用的。</p>
<p>节点元素标签因使用的地方不同，我将他们分为：节元素标签、文本元素标签、分组元素标签分开来讲解HTML5中新增加的语义化标签和使用总结。</p>
<p>&nbsp;</p>
<section>

<h2 id="header元素"><a href="#header元素" class="headerlink" title="header元素"></a>header元素</h2><p>header 元素代表“网页”或“section”的页眉。<br>通常包含<code>h1-h6</code>元素或<code>hgroup</code>，作为整个页面或者一个内容块的标题。也可以包裹一节的目录部分，一个搜索框，一个<code>nav</code>，或者任何相关logo。</p>
<p>整个页面没有限制header元素的个数，可以拥有多个，可以为每个内容块增加一个header元素</p>
<p><figure></figure></p>
<p><pre>&lt;header&gt;<br>    &lt;hgroup&gt;<br>        &lt;h1&gt;网站标题&lt;/h1&gt;<br>        &lt;h1&gt;网站副标题&lt;/h1&gt;<br>    &lt;/hgroup&gt;<br>&lt;/header&gt;</pre></p>
<p><figcaption>header的示例代码</figcaption>header使用注意：</p>
<ul>
<li>可以是“网页”或任意“section”的头部部分；</li>
<li>没有个数限制。</li>
<li>如果hgroup或h1-h6自己就能工作的很好，那就不要用header。<br></li></ul></section><section>

<h2 id="footer元素"><a href="#footer元素" class="headerlink" title="footer元素"></a>footer元素</h2><p><code>footer</code>元素代表“网页”或“section”的页脚，通常含有该节的一些基本信息，譬如：作者，相关文档链接，版权资料。如果<code>footer</code>元素包含了整个节，那么它们就代表附录，索引，提拔，许可协议，标签，类别等一些其他类似信息。</p>
<p><figure></figure></p>
<p><pre>&lt;footer&gt;<br>    COPYRIGHT@小北<br>&lt;/footer&gt;</pre></p>
<p><figcaption><code>footer</code>的示例代码</figcaption>footer使用注意：</p>
<ul>
<li>可以是“网页”或任意“section”的底部部分；</li>
<li>没有个数限制，除了包裹的内容不一样，其他跟header类似。<br></li></ul></section><section>

<h2 id="hgroup元素"><a href="#hgroup元素" class="headerlink" title="hgroup元素"></a>hgroup元素</h2><p><code>hgroup</code>元素代表“网页”或“section”的标题，当元素有多个层级时，该元素可以将<code>h1</code>到<code>h6</code>元素放在其内，譬如文章的主标题和副标题的组合</p>
<p><figure></figure></p>
<p><pre>&lt;hgroup&gt;<br>    &lt;h1&gt;这是一篇介绍HTML 5语义化标签和更简洁的结构&lt;/h1&gt;<br>    &lt;h2&gt;HTML 5&lt;/h2&gt;<br>&lt;/hgroup&gt;</pre></p>
<p><figcaption><code>hgroup</code>示例代码</figcaption>hgroup使用注意：</p>
<ul>
<li>如果只需要一个h1-h6标签就不用hgroup</li>
<li>如果有连续多个h1-h6标签就用hgroup</li>
<li>如果有连续多个标题和其他文章数据，h1-h6标签就用hgroup包住，和其他文章元数据一起放入header标签<br></li></ul></section><section>

<h2 id="nav元素"><a href="#nav元素" class="headerlink" title="nav元素"></a>nav元素</h2><p><code>nav</code>元素代表页面的导航链接区域。用于定义页面的<strong>主要导航部分</strong>。</p>
<p><figure></figure></p>
<p><pre>&lt;nav&gt;<br>    &lt;ul&gt;<br>        &lt;li&gt;HTML 5&lt;/li&gt;<br>        &lt;li&gt;CSS3&lt;/li&gt;<br>        &lt;li&gt;JavaScript&lt;/li&gt;<br>    &lt;/ul&gt;<br>&lt;/nav&gt;</pre></p>
<p><figcaption><code>nav</code>实例</figcaption>但是我在有些时候却情不自禁的想用它，譬如：侧边栏上目录，面包屑导航，搜索样式，或者下一篇上一篇文章，但是事实上规范上说nav只能用在页面主要导航部分上。页脚区域中的链接列表，虽然指向不同网站的不同区域，譬如服务条款，版权页等，这些footer元素就能够用了。</p>
<p>nav使用注意：</p>
<ul>
<li>用在整个页面主要导航部分上，不合适就不要用nav元素；<br></li></ul></section><section>

<h2 id="aside元素"><a href="#aside元素" class="headerlink" title="aside元素"></a>aside元素</h2><p><code>aside</code>元素被包含在article元素中作为主要内容的附属信息部分，其中的内容可以是与当前文章有关的相关资料、标签、名次解释等。（特殊的section）</p>
<p>在article元素之外使用作为页面或站点全局的附属信息部分。最典型的是侧边栏，其中的内容可以是日志串连，其他组的导航，甚至广告，这些内容相关的页面。</p>
<p><figure></figure></p>
<p><pre>&lt;article&gt;<br>    &lt;p&gt;内容&lt;/p&gt;<br>    &lt;aside&gt;<br>        &lt;h1&gt;作者简介&lt;/h1&gt;<br>        &lt;p&gt;小北，前端一枚&lt;/p&gt;<br>    &lt;/aside&gt;<br>&lt;/article&gt;</pre></p>
<p><figcaption><code>aside</code>实例</figcaption>aside使用总结：</p>
<ul>
<li>aside在article内表示主要内容的附属信息，</li>
<li>在article之外则可做侧边栏，没有article与之对应，最好不用。</li>
<li>如果是广告，其他日志链接或者其他分类导航也可以用<br></li></ul></section><section>

<h2 id="section元素"><a href="#section元素" class="headerlink" title="section元素"></a>section元素</h2><p><code>section</code>元素代表文档中的“节”或“段”，“段”可以是指一篇文章里按照主题的分段；“节”可以是指一个页面里的分组。</p>
<p>section通常还带标题，虽然html5中section会自动给标题h1-h6降级，但是最好手动给他们降级。如下：</p>
<p><figure></figure></p>
<p><pre>&lt;section&gt;<br>    &lt;h1&gt;section是啥？&lt;/h1&gt;<br>    &lt;article&gt;<br>        &lt;h2&gt;关于section&lt;/h1&gt;<br>        &lt;p&gt;section的介绍&lt;/p&gt;<br>        &lt;section&gt;<br>            &lt;h3&gt;关于其他&lt;/h3&gt;<br>            &lt;p&gt;关于其他section的介绍&lt;/p&gt;<br>        &lt;/section&gt;<br>    &lt;/article&gt;<br>&lt;/section&gt;</pre></p>
<p><figcaption><code>section</code>示例代码</figcaption>section使用注意：</p>
<p>一张页面可以用section划分为简介、文章条目和联系信息。不过在文章内页，最好用article。section不是一般意义上的容器元素，如果想作为样式展示和脚本的便利，可以用div。</p>
<ul>
<li>表示文档中的节或者段；</li>
<li>article、nav、aside可以理解为特殊的section，所以如果可以用article、nav、aside就不要用section，没实际意义的就用div<br></li></ul></section><section>

<h2 id="article元素"><a href="#article元素" class="headerlink" title="article元素"></a>article元素</h2><p><code>article</code>元素最容易跟<code>section</code>和<code>div</code>容易混淆，其实<code>article</code>代表一个在文档，页面或者网站中自成一体的内容，其目的是为了让开发者独立开发或重用。譬如论坛的帖子，博客上的文章，一篇用户的评论，一个互动的widget小工具。（特殊的section）</p>
<p>除了它的内容，<code>article</code>会有一个标题（通常会在<code>header</code>里），会有一个<code>footer</code>页脚。我们举几个例子介绍一下article，好更好区分article、section、div</p>
<p>&nbsp;</p>
<p><pre>&lt;article&gt;<br>    &lt;h1&gt;一篇文章&lt;/h1&gt;<br>    &lt;p&gt;文章内容..&lt;/p&gt;<br>    &lt;footer&gt;<br>        &lt;p&gt;&lt;small&gt;版权：html5jscss网所属，作者：小北&lt;/small&gt;&lt;/p&gt;<br>    &lt;/footer&gt;<br>&lt;/article&gt;</pre></p>
<p><figcaption>一篇简单文章的article示例代码</figcaption>&nbsp;</p>
<p>上例是最好简单的article标签使用情况，如果在article内部再嵌套article，那就代表内嵌的article是与它外部的内容有关联的，如博客文章下面的评论，如下：</p>
<p><figure></figure></p>
<p><pre>&lt;article&gt;</pre></p>
<pre><code>&amp;lt;header&amp;gt;
    &amp;lt;h1&amp;gt;一篇文章&amp;lt;/h1&amp;gt;
    &amp;lt;p&amp;gt;&amp;lt;time pubdate datetime=&quot;2012-10-03&quot;&amp;gt;2012/10/03&amp;lt;/time&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/header&amp;gt;

&amp;lt;p&amp;gt;文章内容..&amp;lt;/p&amp;gt;

&amp;lt;article&amp;gt;
    &amp;lt;h2&amp;gt;评论&amp;lt;/h2&amp;gt;

    &amp;lt;article&amp;gt;
        &amp;lt;header&amp;gt;
            &amp;lt;h3&amp;gt;评论者: XXX&amp;lt;/h3&amp;gt;
            &amp;lt;p&amp;gt;&amp;lt;time pubdate datetime=&quot;2012-10-03T19:10-08:00&quot;&amp;gt;~1 hour ago&amp;lt;/time&amp;gt;&amp;lt;/p&amp;gt;
        &amp;lt;/header&amp;gt;
        &amp;lt;p&amp;gt;哈哈哈&amp;lt;/p&amp;gt;
    &amp;lt;/article&amp;gt;

    &amp;lt;article&amp;gt;
        &amp;lt;header&amp;gt;
            &amp;lt;h3&amp;gt;评论者: XXX&amp;lt;/h3&amp;gt;
            &amp;lt;p&amp;gt;&amp;lt;time pubdate datetime=&quot;2012-10-03T19:10-08:00&quot;&amp;gt;~1 hour ago&amp;lt;/time&amp;gt;&amp;lt;/p&amp;gt;
        &amp;lt;/header&amp;gt;
        &amp;lt;p&amp;gt;哈？哈？哈？&amp;lt;/p&amp;gt;
    &amp;lt;/article&amp;gt;

&amp;lt;/article&amp;gt;
</code></pre><p>&lt;/article&gt;</p>
<p><figcaption>文章里的评论，一个article嵌套article来表示的实例</figcaption>article内部嵌套article，有可能是评论或其他跟文章有关联的内容。那article内部嵌套section一般是什么情况呢。如下：</p>
<p><figure></figure></p>
<p><pre>&lt;article&gt;</pre></p>
<pre><code>&amp;lt;h1&amp;gt;前端技术&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;前端技术有那些&amp;lt;/p&amp;gt;

&amp;lt;section&amp;gt;
    &amp;lt;h2&amp;gt;CSS&amp;lt;/h2&amp;gt;
    &amp;lt;p&amp;gt;样式..&amp;lt;/p&amp;gt;
&amp;lt;/section&amp;gt;

&amp;lt;section&amp;gt;
    &amp;lt;h2&amp;gt;JS&amp;lt;/h2&amp;gt;
    &amp;lt;p&amp;gt;脚本&amp;lt;/p&amp;gt;
&amp;lt;/section&amp;gt;
</code></pre><p>&lt;/article&gt;</p>
<p><figcaption>文章里的章节，一个article里的section实例</figcaption>因为文章内section部分虽然也是独立的部分，但是它门只能算是<em>组成整体的一部分</em>，从属关系，article是大主体，section是构成这个大主体的一部分。本网站的全部文章都是article嵌套一个个section章节，这样能让浏览器更容易区分各个章节所包括的内容。</p>
<p>那section内部嵌套article又有哪些情况呢，如下</p>
<p><figure></figure></p>
<p><pre>&lt;section&gt;</pre></p>
<pre><code>&amp;lt;h1&amp;gt;介绍: 网站制作成员配备&amp;lt;/h1&amp;gt;

&amp;lt;article&amp;gt;
    &amp;lt;h2&amp;gt;设计师&amp;lt;/h2&amp;gt;
    &amp;lt;p&amp;gt;设计网页的...&amp;lt;/p&amp;gt;
&amp;lt;/article&amp;gt;

&amp;lt;article&amp;gt;
    &amp;lt;h2&amp;gt;程序员&amp;lt;/h2&amp;gt;
    &amp;lt;p&amp;gt;后台写程序的..&amp;lt;/p&amp;gt;
&amp;lt;/article&amp;gt;

&amp;lt;article&amp;gt;
    &amp;lt;h2&amp;gt;前端工程师&amp;lt;/h2&amp;gt;
    &amp;lt;p&amp;gt;给楼上两位打杂的..&amp;lt;/p&amp;gt;
&amp;lt;/article&amp;gt;
</code></pre><p>&lt;/section&gt;</p>
<p><figcaption>一个section里的article实例</figcaption>设计师、程序员、前端工程师都是一个独立的整体，他们组成了网站制作基本配备，当然还有其他成员~~。设计师、程序员、前端工程师就像article，是一个个独立的整体，而section将这些自成一体的article包裹，就组成了一个团体。</p>
<p>article和section和例子就例举这么多了，具体情况具体分析，不易深究。漏了<code>div</code>d，其实<code>div</code>就是只是想用来把元素组合或者给它们加样式时使用。</p>
<p>article使用注意：</p>
<ul>
<li>自身独立的情况下：用article</li>
<li>是相关内容：用section</li>
<li>没有语义的：用div<br>*<br></li></ul></section>&nbsp;


      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/前端小记/">前端小记</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端小记/">前端小记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-实现一个简单的摄像功能（不带传输数据）代码片段" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/23/实现一个简单的摄像功能（不带传输数据）代码片段/" class="article-date">
      <time datetime="2016-02-23T06:30:23.000Z" itemprop="datePublished">2016-02-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/23/实现一个简单的摄像功能（不带传输数据）代码片段/">实现一个简单的摄像功能（不带传输数据）代码片段</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">下面用H5的video实现了简单的录像功能，没涉及到数据的传输，因为没有后端，只是一个简单的demo，想做视屏的同学可以用来参考参考。</span></p>
<p><span style="font-size: large; font-family: 'trebuchet ms', geneva;">技术的关键点在就在navigator上，因为navigator在不同浏览器对于打开摄像头的属性是不一样的，详情请看以下代码：</span></p>
<blockquote>
<ol>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;!DOCTYPE html&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;html&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;head&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;title&gt;camera&lt;/title&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;/head&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;body&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;video id=”video” autoplay&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;/video&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;/body&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;script type=”text/javascript”&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">var video =document.getElementById(‘video’);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">navigator.getMedia = ( navigator.getUserMedia ||</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">navigator.webkitGetUserMedia ||</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">navigator.mozGetUserMedia ||</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">navigator.msGetUserMedia);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">navigator.getMedia({video:true},function(stream){</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">video.src = window.webkitURL.createObjectURL(stream);</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">},function(error){alert(error)})</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;/script&gt;</span></li>
<li><span style="font-family: 'trebuchet ms', geneva; font-size: medium;">&lt;/html&gt;</span></li>
</ol>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/大犀牛JavaScript/">大犀牛JavaScript</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-北京，我又来了" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/19/北京，我又来了/" class="article-date">
      <time datetime="2016-02-19T11:02:20.000Z" itemprop="datePublished">2016-02-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/19/北京，我又来了/">北京，我又来了</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>从昨天三点四十开始，我就不断的在路上奔波，但是心里一直悬着，因为怕自己的房被人给定了，又或者是不满意，退房之后又不知道去哪儿。</p>
<p>不过现在好了，住下了 ，也付了第一期的款项，我现在就打算多搞技术吧，虽然一想到这些事儿就开心不起来，老爹还给我语重心长的说要节约着花钱，所以我实在没办法开心起来了，家里，生活里压力确实大，不过不至于把我饿着。想家里无忧无虑的舒适，但是我不得不出来闯闯吧，记得4年之后的梦想一切都不是事儿，我一定要努力工作，因为我在这里的每一分钟都是我和老爹争取来的，想家，但是我一定会忍住。</p>
<p>加油，Jumor。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/CODER的情怀/">CODER的情怀</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i>
                2016 JumorZhu<i class="fa fa-heart animated infinite pulse"></i>
            </div>
           <!--  <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div> -->
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数:
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量:
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.1.22/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 2;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>